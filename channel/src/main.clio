fn on-ping ch:
  fn on-ping-inner:
    console.log "Ping received"
    ch -> .send "pong"

export fn ping-pong:
  channel () => ch
    -> .on "ping" (on-ping ch)
